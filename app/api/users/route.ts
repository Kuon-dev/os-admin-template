import { NextResponse } from 'next/server';
import type { User } from '@/types/user';

// In-memory storage for mock data
let users: User[] = [
  {
    id: '1',
    name: 'Alice Johnson',
    email: 'alice.johnson@company.com',
    role: 'admin',
    status: 'active',
    avatar: 'https://api.dicebear.com/7.x/avataaars/svg?seed=Alice',
    createdAt: '2024-01-15T10:00:00Z',
    updatedAt: '2025-10-20T14:30:00Z',
    lastLogin: '2025-10-23T08:15:00Z',
    loginCount: 342,
  },
  {
    id: '2',
    name: 'Bob Smith',
    email: 'bob.smith@company.com',
    role: 'admin',
    status: 'active',
    avatar: 'https://api.dicebear.com/7.x/avataaars/svg?seed=Bob',
    createdAt: '2024-01-20T11:30:00Z',
    updatedAt: '2025-10-22T16:45:00Z',
    lastLogin: '2025-10-22T18:30:00Z',
    loginCount: 289,
  },
  {
    id: '3',
    name: 'Carol Williams',
    email: 'carol.williams@company.com',
    role: 'editor',
    status: 'active',
    avatar: 'https://api.dicebear.com/7.x/avataaars/svg?seed=Carol',
    createdAt: '2024-02-10T09:00:00Z',
    updatedAt: '2025-10-21T10:20:00Z',
    lastLogin: '2025-10-21T11:45:00Z',
    loginCount: 234,
  },
  {
    id: '4',
    name: 'David Brown',
    email: 'david.brown@company.com',
    role: 'editor',
    status: 'active',
    avatar: 'https://api.dicebear.com/7.x/avataaars/svg?seed=David',
    createdAt: '2024-02-15T14:20:00Z',
    updatedAt: '2025-10-23T09:00:00Z',
    lastLogin: '2025-10-23T09:00:00Z',
    loginCount: 198,
  },
  {
    id: '5',
    name: 'Emma Davis',
    email: 'emma.davis@company.com',
    role: 'user',
    status: 'active',
    avatar: 'https://api.dicebear.com/7.x/avataaars/svg?seed=Emma',
    createdAt: '2024-03-01T08:45:00Z',
    updatedAt: '2025-10-22T15:30:00Z',
    lastLogin: '2025-10-22T16:20:00Z',
    loginCount: 156,
  },
  {
    id: '6',
    name: 'Frank Miller',
    email: 'frank.miller@company.com',
    role: 'user',
    status: 'active',
    avatar: null,
    createdAt: '2024-03-10T13:15:00Z',
    updatedAt: '2025-10-20T12:00:00Z',
    lastLogin: '2025-10-20T14:30:00Z',
    loginCount: 145,
  },
  {
    id: '7',
    name: 'Grace Wilson',
    email: 'grace.wilson@company.com',
    role: 'editor',
    status: 'active',
    avatar: 'https://api.dicebear.com/7.x/avataaars/svg?seed=Grace',
    createdAt: '2024-04-05T10:30:00Z',
    updatedAt: '2025-10-23T07:45:00Z',
    lastLogin: '2025-10-23T08:00:00Z',
    loginCount: 187,
  },
  {
    id: '8',
    name: 'Henry Moore',
    email: 'henry.moore@company.com',
    role: 'user',
    status: 'inactive',
    avatar: 'https://api.dicebear.com/7.x/avataaars/svg?seed=Henry',
    createdAt: '2024-04-20T16:00:00Z',
    updatedAt: '2025-09-15T10:00:00Z',
    lastLogin: '2025-09-15T11:30:00Z',
    loginCount: 89,
  },
  {
    id: '9',
    name: 'Ivy Taylor',
    email: 'ivy.taylor@company.com',
    role: 'user',
    status: 'active',
    avatar: 'https://api.dicebear.com/7.x/avataaars/svg?seed=Ivy',
    createdAt: '2024-05-12T09:20:00Z',
    updatedAt: '2025-10-21T13:15:00Z',
    lastLogin: '2025-10-21T14:00:00Z',
    loginCount: 132,
  },
  {
    id: '10',
    name: 'Jack Anderson',
    email: 'jack.anderson@company.com',
    role: 'admin',
    status: 'active',
    avatar: null,
    createdAt: '2024-05-25T11:45:00Z',
    updatedAt: '2025-10-22T17:20:00Z',
    lastLogin: '2025-10-22T18:45:00Z',
    loginCount: 176,
  },
  {
    id: '11',
    name: 'Karen Thomas',
    email: 'karen.thomas@company.com',
    role: 'editor',
    status: 'active',
    avatar: 'https://api.dicebear.com/7.x/avataaars/svg?seed=Karen',
    createdAt: '2024-06-08T14:30:00Z',
    updatedAt: '2025-10-23T06:30:00Z',
    lastLogin: '2025-10-23T07:15:00Z',
    loginCount: 143,
  },
  {
    id: '12',
    name: 'Leo Jackson',
    email: 'leo.jackson@company.com',
    role: 'user',
    status: 'suspended',
    avatar: 'https://api.dicebear.com/7.x/avataaars/svg?seed=Leo',
    createdAt: '2024-06-20T08:00:00Z',
    updatedAt: '2025-10-10T09:00:00Z',
    lastLogin: '2025-10-05T12:00:00Z',
    loginCount: 67,
  },
  {
    id: '13',
    name: 'Maria White',
    email: 'maria.white@company.com',
    role: 'user',
    status: 'active',
    avatar: 'https://api.dicebear.com/7.x/avataaars/svg?seed=Maria',
    createdAt: '2024-07-03T12:15:00Z',
    updatedAt: '2025-10-22T11:00:00Z',
    lastLogin: '2025-10-22T13:30:00Z',
    loginCount: 124,
  },
  {
    id: '14',
    name: 'Nathan Harris',
    email: 'nathan.harris@company.com',
    role: 'editor',
    status: 'active',
    avatar: null,
    createdAt: '2024-07-18T15:40:00Z',
    updatedAt: '2025-10-21T16:45:00Z',
    lastLogin: '2025-10-21T17:00:00Z',
    loginCount: 118,
  },
  {
    id: '15',
    name: 'Olivia Martin',
    email: 'olivia.martin@company.com',
    role: 'user',
    status: 'active',
    avatar: 'https://api.dicebear.com/7.x/avataaars/svg?seed=Olivia',
    createdAt: '2024-08-05T09:30:00Z',
    updatedAt: '2025-10-23T10:15:00Z',
    lastLogin: '2025-10-23T10:30:00Z',
    loginCount: 95,
  },
  {
    id: '16',
    name: 'Paul Thompson',
    email: 'paul.thompson@company.com',
    role: 'user',
    status: 'active',
    avatar: 'https://api.dicebear.com/7.x/avataaars/svg?seed=Paul',
    createdAt: '2024-08-22T13:20:00Z',
    updatedAt: '2025-10-20T08:30:00Z',
    lastLogin: '2025-10-20T09:45:00Z',
    loginCount: 87,
  },
  {
    id: '17',
    name: 'Quinn Garcia',
    email: 'quinn.garcia@company.com',
    role: 'editor',
    status: 'active',
    avatar: 'https://api.dicebear.com/7.x/avataaars/svg?seed=Quinn',
    createdAt: '2024-09-10T10:50:00Z',
    updatedAt: '2025-10-22T14:20:00Z',
    lastLogin: '2025-10-22T15:00:00Z',
    loginCount: 76,
  },
  {
    id: '18',
    name: 'Rachel Martinez',
    email: 'rachel.martinez@company.com',
    role: 'user',
    status: 'inactive',
    avatar: null,
    createdAt: '2024-09-28T16:10:00Z',
    updatedAt: '2025-08-30T10:00:00Z',
    lastLogin: '2025-08-30T11:20:00Z',
    loginCount: 43,
  },
  {
    id: '19',
    name: 'Samuel Robinson',
    email: 'samuel.robinson@company.com',
    role: 'user',
    status: 'active',
    avatar: 'https://api.dicebear.com/7.x/avataaars/svg?seed=Samuel',
    createdAt: '2024-10-12T11:25:00Z',
    updatedAt: '2025-10-21T09:40:00Z',
    lastLogin: '2025-10-21T10:00:00Z',
    loginCount: 58,
  },
  {
    id: '20',
    name: 'Tina Clark',
    email: 'tina.clark@company.com',
    role: 'admin',
    status: 'active',
    avatar: 'https://api.dicebear.com/7.x/avataaars/svg?seed=Tina',
    createdAt: '2024-10-25T14:35:00Z',
    updatedAt: '2025-10-23T11:20:00Z',
    lastLogin: '2025-10-23T11:30:00Z',
    loginCount: 52,
  },
  {
    id: '21',
    name: 'Uma Rodriguez',
    email: 'uma.rodriguez@company.com',
    role: 'user',
    status: 'active',
    avatar: 'https://api.dicebear.com/7.x/avataaars/svg?seed=Uma',
    createdAt: '2025-09-15T08:20:00Z',
    updatedAt: '2025-10-22T12:30:00Z',
    lastLogin: '2025-10-22T13:00:00Z',
    loginCount: 28,
  },
  {
    id: '22',
    name: 'Victor Lewis',
    email: 'victor.lewis@company.com',
    role: 'user',
    status: 'active',
    avatar: null,
    createdAt: '2025-09-28T10:45:00Z',
    updatedAt: '2025-10-21T15:15:00Z',
    lastLogin: '2025-10-21T16:30:00Z',
    loginCount: 24,
  },
  {
    id: '23',
    name: 'Wendy Lee',
    email: 'wendy.lee@company.com',
    role: 'editor',
    status: 'active',
    avatar: 'https://api.dicebear.com/7.x/avataaars/svg?seed=Wendy',
    createdAt: '2025-10-01T13:00:00Z',
    updatedAt: '2025-10-23T08:45:00Z',
    lastLogin: '2025-10-23T09:15:00Z',
    loginCount: 18,
  },
  {
    id: '24',
    name: 'Xavier Walker',
    email: 'xavier.walker@company.com',
    role: 'user',
    status: 'active',
    avatar: 'https://api.dicebear.com/7.x/avataaars/svg?seed=Xavier',
    createdAt: '2025-10-08T09:30:00Z',
    updatedAt: '2025-10-20T11:50:00Z',
    lastLogin: '2025-10-20T12:15:00Z',
    loginCount: 15,
  },
  {
    id: '25',
    name: 'Yara Hall',
    email: 'yara.hall@company.com',
    role: 'user',
    status: 'active',
    avatar: 'https://api.dicebear.com/7.x/avataaars/svg?seed=Yara',
    createdAt: '2025-10-15T15:20:00Z',
    updatedAt: '2025-10-22T10:40:00Z',
    lastLogin: '2025-10-22T11:00:00Z',
    loginCount: 12,
  },
];

// GET /api/users - List all users
export async function GET() {
  return NextResponse.json(users);
}

// POST /api/users - Create a new user
export async function POST(request: Request) {
  try {
    const body = await request.json();

    const newUser: User = {
      id: crypto.randomUUID(),
      name: body.name,
      email: body.email,
      role: body.role || 'user',
      status: body.status || 'active',
      avatar: body.avatar || null,
      createdAt: new Date().toISOString(),
      updatedAt: new Date().toISOString(),
      lastLogin: null,
      loginCount: 0,
    };

    users = [newUser, ...users];

    return NextResponse.json(newUser, { status: 201 });
  } catch (error) {
    return NextResponse.json(
      { error: 'Failed to create user' },
      { status: 500 }
    );
  }
}
